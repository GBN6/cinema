<div class="form-container">
    <div class="movie-title">
        Podsumowanie
    </div>
    <div class="selected-seats">
        <div class="one-ticket" *ngFor="let ticket of tickets">
            <div class="seat" *ngIf="ticket.seat.price">
               <div class="ticekt-movie-title">{{ticket.title}}: </div>
               <div class="ticekt-date">{{ticket.date}}, {{ ticket.hour }} </div>
               <div class="ticket-position">Rząd {{ ticket.seat.positon.charAt(0) }} Miejsce {{ ticket.seat.positon.slice(1) }} <span *ngIf="ticket.seat.special">VIP</span></div>
            </div>
            <div class="seat-price" *ngIf="ticket.seat.price">
                {{ticket.seat.price}} PLN
            </div>
        </div>
        <div class="all" *ngIf="getFullPrice()">
            {{ getFullPrice() }} PLN
        </div>
    </div>
    <div class="">
        <form [formGroup]="userForm" (ngSubmit)="submitForm()">
            <div class="name-container">
                <div class="user-input">
                    <input [class.error]="userForm.controls.userName.touched && userForm.controls.userName.errors" formControlName="userName" type="text" id="name" class="input" name="user-name" placeholder="Imię" required>
                    <ng-container *ngIf="userForm.controls.userName.errors as errors">
                        <ng-container *ngIf="userForm.controls.userName.touched">
                            <p *ngIf="errors['pattern']">Tylko litery</p>
                          <p *ngIf="errors['required']">Te pole jest obowiązkowe!</p>
                          <p *ngIf="errors['maxlength'] as maxLength">Max liczba znaków to {{maxLength.requiredLength}}</p>
                        </ng-container>
                    </ng-container>
                </div>
                <div class="user-input">
                    <input [class.error]="userForm.controls.userLastName.touched && userForm.controls.userLastName.errors"  formControlName="userLastName" type="text" id="country" class="input" name="user-last-name" placeholder="Nazwisko" minlength="3" maxlength="20" required>
                    <ng-container *ngIf="userForm.controls.userLastName.errors as errors">
                        <ng-container *ngIf="userForm.controls.userLastName.touched">
                            <p *ngIf="errors['pattern']">Tylko litery</p>
                          <p *ngIf="errors['required']">Te pole jest obowiązkowe!</p>
                          <p *ngIf="errors['maxlength'] as maxLength">Max liczba znaków to {{maxLength.requiredLength}}</p>
                        </ng-container>
                    </ng-container>
                </div>
            </div>
            <div class="user-input">
                <input [class.error]="userForm.controls.userPhoneNumber.touched && userForm.controls.userPhoneNumber.errors" formControlName="userPhoneNumber" type="tel" id="phone" class="input" name="user-phone" placeholder="Nr telefonu" pattern="[0-9]{9}">
                <ng-container *ngIf="userForm.controls.userPhoneNumber.errors as errors">
                    <ng-container *ngIf="userForm.controls.userPhoneNumber.touched">
                        <p *ngIf="errors['pattern']" class="text-danger">Podaj NUMER telefonu</p>
                        <p *ngIf="errors['minlength'] as minLength">
                            Podałeś {{ minLength.actualLength}} znaków, minimum to {{minLength.requiredLength}}
                        </p>
                      <p *ngIf="errors['maxlength']">Te pole jest obowiązkowe!</p>
                    </ng-container>
                </ng-container>
            </div>
            <div class="user-input">
                <input [class.error]="userForm.controls.userMail.touched && userForm.controls.userMail.errors" formControlName="userMail" type="email" id="email" class="input" name="user-email" placeholder="Email" required>
                <ng-container *ngIf="userForm.controls.userMail.errors as errors">
                    <ng-container *ngIf="userForm.controls.userMail.touched">
                      <p *ngIf="errors['required']">Te pole jest obowiązkowe!</p>
                      <p *ngIf="errors['pattern']">Podaj prawidłowy email</p>
                    </ng-container>
                </ng-container>
            </div>
            <div class="user-input">
                <input [class.error]="userForm.controls.userMailConfirmation.touched && userForm.controls.userMailConfirmation.errors || userForm.errors" formControlName="userMailConfirmation" type="email" id="confirm-email" class="input" placeholder="Potwierdz email" name="user-email" required>
                <ng-container *ngIf="userForm.controls.userMailConfirmation.errors as errors">
                    <ng-container *ngIf="userForm.controls.userMailConfirmation.touched">
                      <p *ngIf="errors['required']">Te pole jest obowiązkowe!</p>
                      <p *ngIf="errors['pattern']">Podaj prawidłowy email</p>
                    </ng-container>                
                </ng-container>
                <ng-container *ngIf="userForm.errors as errors">
                    <ng-container *ngIf="userForm.controls.userMailConfirmation.touched">
                        <p *ngIf="errors['emailMismatch']">Adresy email się różnią!</p>
                      </ng-container>  
                </ng-container>
            </div>
            <div class="toggle-switch">
                <input type="checkbox" id="switch" />
                <label for="switch"></label>
                <div class="toggle-text">Chce otrzymywac informacje o znizkach, promocjach itp</div>
            </div>
            <div class="user-input">
                <input type="text" id="voucher-code" class="input" placeholder="Kod znizkowy" name="voucher-code">
                <p class="error"></p>
            </div>
            <button type="submit" class="order">Zamawiam</button>
            <h1></h1>
        </form>
    </div>
    <div class="return-to-seats">
        <a [routerLinkActive]="['active']" class="router-link" routerLink="/seats">Wróć do wyboru miejsc</a>
    </div>
</div>

<div id="modal" class="modal">
    <div class="modal-content">
        <h1>Wprowadź kod blik</h1>
        <form>
            <input [formControl]="blikControl" [class.error]="blikControl.touched && blikControl.errors" class="blik-input" placeholder="Kod Blik">
            <ng-container *ngIf="blikControl.errors as errors">
                <ng-container *ngIf="blikControl.touched">
                    <p *ngIf="errors['pattern']" class="text-danger">Tylko cyfry</p>
                    <p *ngIf="errors['minlength'] as minLength">
                        Podałeś {{ minLength.actualLength}} liczb, minimum to {{minLength.requiredLength}}
                    </p>
                    <p *ngIf="errors['maxlength'] as maxLength">Max liczba cyfr to {{maxLength.requiredLength}}</p>
                    <p *ngIf="errors['required']">Te pole jest obowiązkowe!</p>
                </ng-container>
            </ng-container>
            <div class="modal-nav">
                <button class="modal-btn blik-btn">Potwierdź</button>
                <button type="button" class="modal-btn close-modal" (click)="closeModal()" >Wyjdź</button>
            </div>
        </form>
    </div>
</div>